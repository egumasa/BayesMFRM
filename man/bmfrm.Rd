% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bmfrm.R
\name{bmfrm}
\alias{bmfrm}
\title{Fit Bayesian Many-Facet Rasch Models}
\usage{
bmfrm(
  formula,
  data,
  K = NULL,
  priors = NULL,
  family = c("rating_scale", "partial_credit"),
  model_name = NULL,
  cache_dir = "stan_cache",
  save_csvs = TRUE,
  refit = c("on_change", "never", "always"),
  iter = 2000,
  warmup = floor(iter/2),
  chains = 4,
  cores = getOption("mc.cores", 1L),
  seed = NULL,
  ...
)
}
\arguments{
\item{formula}{R formula specifying the model (e.g., score ~ person + item + rater + rater:item)}

\item{data}{data.frame containing all variables in the formula}

\item{K}{number of rating categories (if NULL, inferred from max(score))}

\item{priors}{list of prior() objects (if NULL, uses defaults)}

\item{family}{model family ("rating_scale" for v0.1)}

\item{model_name}{optional name for the model (auto-generated if NULL)}

\item{cache_dir}{directory for caching compiled models and fits}

\item{save_csvs}{whether to save MCMC output as CSV files}

\item{refit}{refit behavior: "never", "always", or "on_change"}

\item{iter}{number of MCMC iterations}

\item{warmup}{number of warmup iterations}

\item{chains}{number of MCMC chains}

\item{cores}{number of CPU cores to use}

\item{seed}{random seed}

\item{...}{additional arguments passed to cmdstanr::sample()}
}
\value{
bmfrm_fit object containing the fitted model and metadata
}
\description{
This is the main function for fitting Bayesian many-facet Rasch models using Stan.
It provides a user-friendly interface for specifying models with multiple facets
and optional bias terms.
}
\examples{
\dontrun{
# Basic 3-facet model
fit <- bmfrm(score ~ person + item + rater, data = ratings, K = 6)

# Model with bias term
fit <- bmfrm(score ~ person + item + rater + rater:item, data = ratings)

# Custom priors
priors <- c(
  prior("normal(0, 2)", class = "theta"),
  prior("normal(0, 1)", class = "item"),
  prior("student_t(3, 0, 1)", class = "rater"),
  prior("normal(0, 0.5)", class = "bias", facet = "rater:item"),
  prior("normal(0, 3)", class = "tau")
)
fit <- bmfrm(score ~ person + item + rater + rater:item, 
             data = ratings, priors = priors)
}
}
